<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>FrameSeeker</title>

    <link rel="shortcut icon" type="image/png" href="Icons/FrameSeeker.png" />
    <link rel="manifest" href="manifest.json" />
    <meta name="theme-color" content="transparent" />
    <meta name="description" content="A PWA (or possibly an actual app) that allows you to view and save frames of a video." />
    <link rel="stylesheet" href="index.css" />

    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />

    <script src="//cdn.jsdelivr.net/npm/eruda"></script>
    <script>
      eruda.init();
    </script>
  </head>
  <body>
    <!-- <div id="preVideo">
      <div id="install-btn">Install PWA</div>

      <div id="chooseVideoBtn" title="Choose Video" style="display: none">
        <svg
          xmlns="http://www.w3.org/2000/svg"
          width="24"
          height="24"
          viewBox="0 0 24 24"
          fill="none"
          stroke="#000000"
          stroke-width="2"
          stroke-linecap="round"
          stroke-linejoin="round"
          class="icon icon-tabler icons-tabler-outline icon-tabler-file-upload"
        >
          <path stroke="none" d="M0 0h24v24H0z" fill="none" />
          <path d="M14 3v4a1 1 0 0 0 1 1h4" />
          <path d="M17 21h-10a2 2 0 0 1 -2 -2v-14a2 2 0 0 1 2 -2h7l5 5v11a2 2 0 0 1 -2 2z" />
          <path d="M12 11v6" />
          <path d="M9.5 13.5l2.5 -2.5l2.5 2.5" />
        </svg>
      </div>
    </div> -->

    <div id="playbackControls">
      <div id="back15Btn" class="button glassy medium">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
          <path stroke="none" d="M0 0h24v24H0z" fill="none" />
          <path d="M8 20h2a1 1 0 0 0 1 -1v-1a1 1 0 0 0 -1 -1h-2v-3h3" />
          <path d="M15 18a6 6 0 1 0 0 -12h-11" />
          <path d="M5 14v6" />
          <path d="M7 9l-3 -3l3 -3" />
        </svg>
      </div>
      <div id="playpauseBtn" class="button glassy large">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="#ffffff">
          <path stroke="none" d="M0 0h24v24H0z" fill="none" />
          <path d="M6 4v16a1 1 0 0 0 1.524 .852l13 -8a1 1 0 0 0 0 -1.704l-13 -8a1 1 0 0 0 -1.524 .852z" />
        </svg>
      </div>
      <div id="forward15Btn" class="button glassy medium">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
          <path stroke="none" d="M0 0h24v24H0z" fill="none" />
          <path d="M17 9l3 -3l-3 -3" />
          <path d="M9 18a6 6 0 1 1 0 -12h11" />
          <path d="M16 20h2a1 1 0 0 0 1 -1v-1a1 1 0 0 0 -1 -1h-2v-3h3" />
          <path d="M13 14v6" />
        </svg>
      </div>
    </div>
    <div id="controls">
      <div id="top">
        <div class="left button glassy">
          <div id="popupOverlay">
            <p id="popupLabel"></p>
            <input id="popupValue" type="number" />
          </div>

          <div id="topLeftButtons">
            <svg
              id="framerateSelectorBtn"
              xmlns="http://www.w3.org/2000/svg"
              viewBox="0 0 24 24"
              fill="none"
              stroke-width="2"
              stroke-linecap="round"
              stroke-linejoin="round"
            >
              <path stroke="none" d="M0 0h24v24H0z" fill="none" />
              <path d="M12 6a2 2 0 1 0 4 0a2 2 0 1 0 -4 0" />
              <path d="M4 6l8 0" />
              <path d="M16 6l4 0" />
              <path d="M6 12a2 2 0 1 0 4 0a2 2 0 1 0 -4 0" />
              <path d="M4 12l2 0" />
              <path d="M10 12l10 0" />
              <path d="M15 18a2 2 0 1 0 4 0a2 2 0 1 0 -4 0" />
              <path d="M4 18l11 0" />
              <path d="M19 18l1 0" />
            </svg>
            <svg
              id="timestampSelectorBtn"
              xmlns="http://www.w3.org/2000/svg"
              viewBox="0 0 24 24"
              fill="none"
              stroke-width="2"
              stroke-linecap="round"
              stroke-linejoin="round"
            >
              <path stroke="none" d="M0 0h24v24H0z" fill="none" />
              <path d="M21 12a9 9 0 1 0 -9.972 8.948c.32 .034 .644 .052 .972 .052" />
              <path d="M12 7v5l2 2" />
              <path d="M18.42 15.61a2.1 2.1 0 0 1 2.97 2.97l-3.39 3.42h-3v-3l3.42 -3.39" />
            </svg>
          </div>
        </div>
        <div class="right">
          <div id="chooseVideoBtn" class="button glassy">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
              <path stroke="none" d="M0 0h24v24H0z" fill="none" />
              <path d="M14 3v4a1 1 0 0 0 1 1h4" />
              <path d="M17 21h-10a2 2 0 0 1 -2 -2v-14a2 2 0 0 1 2 -2h7l5 5v11a2 2 0 0 1 -2 2" />
              <path d="M12 11v6" />
              <path d="M9.5 13.5l2.5 -2.5l2.5 2.5" />
            </svg>
          </div>
          <div id="saveFrameBtn" class="button glassy">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
              <path stroke="none" d="M0 0h24v24H0z" fill="none" />
              <path d="M15 8h.01" />
              <path d="M6 13l2.644 -2.644a1.21 1.21 0 0 1 1.712 0l3.644 3.644" />
              <path d="M13 13l1.644 -1.644a1.21 1.21 0 0 1 1.712 0l1.644 1.644" />
              <path d="M4 8v-2a2 2 0 0 1 2 -2h2" />
              <path d="M4 16v2a2 2 0 0 0 2 2h2" />
              <path d="M16 4h2a2 2 0 0 1 2 2v2" />
              <path d="M16 20h2a2 2 0 0 0 2 -2v-2" />
            </svg>
          </div>
        </div>
      </div>
      <div id="bottom">
        <div>
          <div class="left">
            <div id="prevFrameBtn" class="button glassy">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <path stroke="none" d="M0 0h24v24H0z" fill="none" />
                <path d="M7 6v12" />
                <path d="M18 6l-6 6l6 6" />
              </svg>
            </div>
            <div id="back5Btn" class="button glassy">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <path stroke="none" d="M0 0h24v24H0z" fill="none" />
                <path d="M15 18a6 6 0 1 0 0 -12h-11" />
                <path d="M7 9l-3 -3l3 -3" />
                <path d="M8 20h2a1 1 0 0 0 1 -1v-1a1 1 0 0 0 -1 -1h-2v-3h3" />
              </svg>
            </div>
          </div>
          <div class="right">
            <div id="forward5Btn" class="button glassy">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <path stroke="none" d="M0 0h24v24H0z" fill="none" />
                <path d="M9 18a6 6 0 1 1 0 -12h11" />
                <path d="M13 20h2a1 1 0 0 0 1 -1v-1a1 1 0 0 0 -1 -1h-2v-3h3" />
                <path d="M17 9l3 -3l-3 -3" />
              </svg>
            </div>
            <div id="nextFrameBtn" class="button glassy">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <path stroke="none" d="M0 0h24v24H0z" fill="none" />
                <path d="M6 6l6 6l-6 6" />
                <path d="M17 5v13" />
              </svg>
            </div>
          </div>
        </div>
        <div class="seekbar glassy">
          <span id="currentTime">00:00</span>
          <input type="range" id="seekbarSlider" min="0" max="100" value="0" step="0.01" />
          <span id="totalTime">00:00</span>
        </div>
      </div>
    </div>

    <video id="video"></video>
    <canvas id="video-blur"></canvas>

    <script src="index.js"></script>
    <script src="pwa.js"></script>

    <script>
      window.showDevPopup = function (message) {
        let popup = document.createElement("div");
        popup.textContent = message;
        Object.assign(popup.style, {
          position: "fixed",
          left: "50%",
          top: "40%",
          transform: "translate(-50%, -50%)",
          padding: "1em 2em",
          background: "rgba(33,33,33,0.96)",
          color: "#fff",
          fontSize: "1.1em",
          borderRadius: "0.6em",
          boxShadow: "0 8px 32px rgba(0,0,0,0.23)",
          zIndex: 10000,
          opacity: "1",
          transition: "opacity 0.2s",
        });
        document.body.appendChild(popup);
        setTimeout(() => {
          popup.style.opacity = "0";
          setTimeout(() => popup.remove(), 300);
        }, 1000);
      };

      window.showDevPopup("Test6");
    </script>

    <script type="module">
      import { squircleObserver } from "https://esm.sh/corner-smoothing";

      window.applySquircles = function applySquircles() {
        const allElements = document.querySelectorAll("*");
        allElements.forEach((el) => {
          const style = getComputedStyle(el);
          const radius = parseFloat(style.borderRadius);
          if (radius > 0) {
            squircleObserver(el, {
              cornerRadius: radius,
              cornerSmoothing: 0.6,
              style: {
                fill: style.backgroundColor,
              },
            });
          }
        });
      };

      window.addEventListener("load", window.applySquircles);
    </script>
  </body>
</html>
